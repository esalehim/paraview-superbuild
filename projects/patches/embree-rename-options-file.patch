From c9a3b4925d1faa285c82744267a78f6230716d52 Mon Sep 17 00:00:00 2001
From: Chuck Atkins <chuck.atkins@kitware.com>
Date: Mon, 5 Mar 2018 09:22:22 -0600
Subject: [PATCH 1/3] Use compiler ID for cmake options file name

---
 CMakeLists.txt                          | 16 +++++++---------
 common/cmake/{gcc.cmake => gnu.cmake}   |  0
 common/cmake/{icc.cmake => intel.cmake} |  0
 3 files changed, 7 insertions(+), 9 deletions(-)
 rename common/cmake/{gcc.cmake => gnu.cmake} (100%)
 rename common/cmake/{icc.cmake => intel.cmake} (100%)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 07fa0a61f..3091d9df0 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -262,15 +262,13 @@ IF (WIN32)
 
 ELSE (WIN32)
   IF(CMAKE_CXX_COMPILER_WRAPPER STREQUAL "CrayPrgEnv")
-    INCLUDE(crayprgenv)
-  ELSEIF (${CMAKE_CXX_COMPILER_ID} STREQUAL "GNU")
-    INCLUDE (gcc)
-  ELSEIF (${CMAKE_CXX_COMPILER_ID} STREQUAL "Clang")
-    INCLUDE (clang)
-  ELSEIF (${CMAKE_CXX_COMPILER_ID} STREQUAL "Intel")
-    INCLUDE (icc)
-  ELSE ()
-    MESSAGE(FATAL_ERROR "Unsupported compiler: " ${CMAKE_CXX_COMPILER_ID})
+    INCLUDE (crayprgenv)
+  ELSE()
+    STRING(TOLOWER "${CMAKE_CXX_COMPILER_ID}" _LOWER_CXX_COMPILER_ID)
+    INCLUDE(${_LOWER_CXX_COMPILER_ID} OPTIONAL RESULT_VARIABLE COMPILER_FOUND)
+    IF (NOT COMPILER_FOUND)
+      MESSAGE(FATAL_ERROR "Unsupported compiler: " ${CMAKE_CXX_COMPILER_ID})
+    ENDIF ()
   ENDIF ()
 
   IF(NOT CMAKE_BUILD_TYPE)
diff --git a/common/cmake/gcc.cmake b/common/cmake/gnu.cmake
similarity index 100%
rename from common/cmake/gcc.cmake
rename to common/cmake/gnu.cmake
diff --git a/common/cmake/icc.cmake b/common/cmake/intel.cmake
similarity index 100%
rename from common/cmake/icc.cmake
rename to common/cmake/intel.cmake
-- 
2.14.3

